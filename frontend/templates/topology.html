<!DOCTYPE html>
<!-- topology.html -->
<html lang="en" data-theme="light">
<head>
  <link rel="stylesheet" href="{{ url_for('static', path='css/dashboard.css') }}">
  <!-- Load vis-network from CDN for automatic updates -->
  <link rel="stylesheet" href="https://unpkg.com/vis-network@latest/styles/vis-network.min.css" />
</head>
<body>

<!-- Placeholder for Navigation Menu -->
<div id="nav-placeholder"></div>

<!-- Page Content -->
<div id="page-content" style="margin-left:15%; padding:1px 16px; height:1000px;">
    <h2>Topology</h2>
    <div id="network" style="width: 100%; height: 500px; border: 1px solid lightgray;"></div>
</div>

<!-- JavaScript to Load Navigation Menu, Set Active Link, and Display Graph -->
<script>
  fetch("/nav")
  .then(response => response.text())
  .then(data => {
    document.getElementById("nav-placeholder").innerHTML = data;

    const navLinks = document.querySelectorAll("#nav-placeholder ul li a");
    navLinks.forEach(link => {
      if (link.pathname === window.location.pathname) {
        link.classList.add("active");
      }
    });
  })
  .catch(error => console.error("Error loading navigation:", error));

  // Define nodes and edges for the graph
  const nodes = new vis.DataSet([
    { id: 1, label: "Switch 1" },
    { id: 2, label: "Switch 2" },
    { id: 3, label: "Computer 1" },
    { id: 4, label: "Computer 2" },
    { id: 5, label: "Computer 3" },
    { id: 6, label: "Computer 4" },
    { id: 7, label: "Computer 5" }
  ]);

  const edges = new vis.DataSet([
    { from: 1, to: 2 },
    { from: 1, to: 3 },
    { from: 1, to: 6 },
    { from: 2, to: 4 },
    { from: 2, to: 5 },
    { from: 2, to: 7 }
  ]);

  const container = document.getElementById("network");
  const data = { nodes: nodes, edges: edges };
  const options = {
    nodes: { shape: "circle", size: 20, font: { color: "black", size: 14 }},
    edges: { color: "gray", arrows: { to: true }},
    physics: { enabled: true, solver: "forceAtlas2Based" }
  };

  try {
    const network = new vis.Network(container, data, options);
  } catch (error) {
    console.error("Error rendering network:", error);
  }
</script>
<script src="https://unpkg.com/vis-network@latest/standalone/umd/vis-network.min.js"></script>
<script src="{{ url_for('static', path='js/theme/app.js') }}" defer></script>

</body>
</html>
